@model List<Wedding>
@{
    Wedding emptyWedding = new Wedding();
}


<body>
    <div class="text-center">
        <div>
            <h4>Welcome to the Wedding Planner </h4>
            <div>
                <table class="table table-dark table-striped">
                    <thead>
                        <tr>
                            <th scope="col">Wedding</th>
                            <th scope="col">Date</th>
                            <th scope="col">Guests</th>
                            <th scope="col">Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (Wedding wed in Model)
                        {
                            bool alreadyRSVP = wed.RSVP.Any(r => Context.Session.GetInt32("UserId") == r.UserId);
                            <tr>
                                <td>@wed.WeddingName()</td>
                                <td>@wed.WeddingDate</td>
                                @* #of people that have RSVP'd *@
                                <td>@wed.RSVP.Count</td>
                                <td>
                                    <form asp-controller="Wedding" asp-action="Rsvp" asp-route-weddingId="@wed.WeddingId">
                                        @if (alreadyRSVP)
                                        {
                                            <button class="btn btn-link">Un-RSVP</button>
                                        }
                                        else
                                        {
                                            <button class="btn btn-link">RSVP</button>
                                        }
                                    </form>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
                <a href="/NewWedding">New Wedding</a>
            </div>
        </div>
    </div>

</body>

</html>